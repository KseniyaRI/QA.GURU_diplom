# Test info

- Name: Создание Engagement и работа с ним >> Создание Engagement
- Location: /Users/kryabukhin001/Documents/QA.GURU/QA.GURU_diplom/specs/pages.spec.js:45:5

# Error details

```
Error: expect(locator('a.MuiTypography-root.MuiTypography-inherit.MuiLink-root.MuiLink-underlineHover.css-9mh5gv')).toContainText(expected)

Locator: locator('a.MuiTypography-root.MuiTypography-inherit.MuiLink-root.MuiLink-underlineHover.css-9mh5gv')


Matcher error: expected value must be a string or regular expression

Expected has value: undefined
    at /Users/kryabukhin001/Documents/QA.GURU/QA.GURU_diplom/specs/pages.spec.js:71:54
```

# Page snapshot

```yaml
- banner:
  - button:
    - paragraph
  - link:
    - /url: /
    - img
  - button "0"
  - button
  - button "TR Tatiana Rusanova"
- heading "Добро пожаловать в проект" [level=2]
- heading "because ramp selfish yearningly wilderness" [level=6]
- paragraph: Вас добавили в новый проект. Перед получением доступа к электронному файлу по проекту подтвердите соблюдение требований независимости для участников групп по аудиту, обзорной проверке и другим сопутствующим аудиту услугам, перечисленным справа.
- checkbox
- paragraph:
  - text: Я подтверждаю соблюдение требований независимости и полностью понимаю и выполняю требования законодательства об аудиторской деятельности, стандартов аудиторской деятельности,
  - link "Правил независимости аудиторов и аудиторских организаций":
    - /url: https://ruts.pwcinternal.com/sites/rqm/Methodology/_layouts/15/WopiFrame2.aspx?sourcedoc=%7b2450B6AA-A4C6-4121-B87C-BAA725F53C90%7d&file=221227_Pravila-nezavisimosti.pdf&action=default&IsList=1&ListId=%7b51F4AF01-770B-4956-ABF2-A7F5D868BD47%7d&ListItemId=4136
  - text: ","
  - link "Кодекса профессиональной этики аудиторов России":
    - /url: https://ruts.pwcinternal.com/sites/rqm/Methodology/_layouts/15/WopiFrame2.aspx?sourcedoc=%7bC9AA0959-43D6-4577-8D5B-EF255853112F%7d&file=Kodeks-etiki-auditorov_-utverzhdennyi_-Pravleniem-SRO-AAS-22-12-23.pdf&action=default&IsList=1&ListId=%7b51F4AF01-770B-4956-ABF2-A7F5D868BD47%7d&ListItemId=4142
  - text: ","
  - link "Положения об аудиторской независимости ТеДо":
    - /url: https://compass.tedo.ru/services/show/64
  - text: ","
  - link "Правил внутреннего контроля по противодействию легализации (отмыванию) доходов":
    - /url: https://ruts.pwcinternal.com/sites/tedo/DocLib/Forms/AllItems.aspx?FolderCTID=0x012000009A4C97FF3FB04DBA344D2E03F2976B&id=/sites/tedo/DocLib/%D0%9B%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5%20%D0%BD%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D0%BE-%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%B0%D0%BA%D1%82%D1%8B/%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0%20%D0%BE%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%D0%BE%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D0%B8%20%D0%BE%D1%82%D0%BC%D1%8B%D0%B2%D0%B0%D0%BD%D0%B8%D1%8E%20%D0%B4%D0%BE%D1%85%D0%BE%D0%B4%D0%BE%D0%B2/%D0%A2%D0%B5%D0%94%D0%BE%20%D0%90%D1%83%D0%B4%D0%B8%D1%82%20%D0%B8%20%D0%A2%D0%B5%D0%94%D0%BE%20%D0%90%D1%83%D0%B4%D0%B8%D1%82%D0%BE%D1%80%D1%81%D0%BA%D0%B8%D0%B5%20%D1%83%D1%81%D0%BB%D1%83%D0%B3%D0%B8
  - text: ", полученных преступным путем, финансированию терроризма и финансированию распространения оружия массового уничтожения в ходе оказания аудиторских услуг Обществами, а также"
  - link "Положение о системе управления качеством":
    - /url: https://ruts.pwcinternal.com/sites/rqm/Methodology/DocLib1/Forms/AllItems.aspx?FolderCTID=0x012000CEC2CF9F705AC44D832475B1C32D985A&id=%2Fsites%2Frqm%2FMethodology%2FDocLib1%2F%D0%9E%D0%B1%D1%89%D0%B8%D0%B9%20%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%2FRU%20Guidances%2FStatutory%20Compliance%20Guidance%2FQuality%20Control%20Policy%20%2D%20Russia
  - text: .
- button "Подтвердить независимость и подключиться к проекту" [disabled]
- heading "Happy friday" [level=6]: Клиент Happy friday
- heading "Подтверждение независимости для участников групп по аудиту, обзорной проверке и услугам, обеспечивающим уверенность, отличным от аудита и обзорной проверки, и другим сопутствующим аудиту услугам" [level=6]
- heading [level=6]
- heading "В мои обязанности входит обеспечение того, чтобы я и ближайшие члены моей семьи (и в надлежащих случаях родственники) соблюдали применимые требования в отношении независимости. Я понимаю, что в определенных случаях данное подтверждение будет распространяться на период, охватываемый бухгалтерской (финансовой) отчетностью, в отношении которой ТеДо будет выражать свое мнение." [level=6]
- 'heading "Я ознакомился(ась) с требованиями в области независимости, которые применимы ко мне в отношении Клиента(ов), включая требования, которые являются более строгими, чем Положение об аудиторской независимости ТеДо (далее - Положение), такие как: правила независимости, применимые к организациям, на которые распространяются ограничения КЦББ* (кратко приведены ниже, более подробно представлены в Положении, а также при необходимости обращался(ась) за консультацией к руководителю задания или к группе по вопросам независимости." [level=6]'
- heading "Я признаю обязанность немедленно уведомить руководителя задания по аудиту / задания, обеспечивающего уверенность или по другим сопутствующим аудиту услугам, о любых изменениях в отношении этого подтверждения, которые могут быть вызваны изменениями моих обстоятельств или обстоятельств Клиента(ов). Я понимаю, что эта обязанность, а также актуальность данного подтверждения, сохраняется до момента выпуска аудиторского заключения/отчета по заданию, обеспечивающему уверенность или другим сопутствующим аудиту услугам." [level=6]
- heading "Я понимаю, что, если я являюсь участником аудиторской группы аудитора компонента, на работу которого будет полагаться аудитор группы, не являющийся ТеДо, актуальность данного подтверждения сохраняется до момента выпуска аудитором группы, не являющимся ТеДо, аудиторского заключения в отношении группового клиента по аудиту." [level=6]
- heading "В частности, я подтверждаю, что:" [level=6]
- heading "1." [level=6]
- heading "Ни я, ни ближайшие члены моей семьи, ни мои родственники не имеют прямой или существенной косвенной финансовой заинтересованности в Клиенте(ах), в том числе финансовой заинтересованности, полученной в результате заключения договора накопительного страхования). Кроме того, ни я, ни ближайшие члены моей семьи не являлись учредителем (участником, акционером) клиента по аудиту в период выполнения аудиторского задания или в период, за который составлена аудируемая бухгалтерская отчетность." [level=6]
- heading "2." [level=6]
- heading "В дополнение к п.1, ни я, ни ближайшие члены моей семьи не будут осуществлять торговлю ценными бумагами, выпущенными клиентами по аудиту, обзорной проверке и услугам, обеспечивающим уверенность, отличным от аудита и обзорной проверки, до выпуска заключения или в течение 6 месяцев после окончания периода моего вовлечения, в зависимости от того, какой из периодов закончится позднее." [level=6]
- heading "3." [level=6]
- heading "Ни я, ни ближайшие члены моей семьи не являются доверенным лицом или управляющим траста или имущественного комплекса, который владеет или имеет обязательства приобрести прямую или существенную косвенную финансовую заинтересованность в Клиенте(ах), кроме тех случаев, когда получено специальное разрешение от партнера, отвечающего за вопросы независимости." [level=6]
- heading "4." [level=6]
- heading [level=6]
- heading "5." [level=6]
- heading "Ни я, ни ближайшие члены моей семьи не имеем банковских счетов, депозитов, брокерских счетов, открытых у Клиента(ов) или договоров страхования, заключенных с Клиентом(ами) на условиях, существенно отличающихся от условий совершения аналогичных сделок." [level=6]
- heading "6." [level=6]
- heading "Ни я, ни ближайшие члены моей семьи не имеем договоров накопительного страхования, заключенных с Клиентом(ами), за исключением тех случаев, когда они приобретены на условиях, не отличающихся от условий совершения аналогичных сделок, и соблюдается хотя бы одно из перечисленных условий:" [level=6]
- heading "a." [level=6]
- heading "доходность зависит от собственных активов страховой компании и либо является фиксированной, либо определяется решением руководства и (i) суммарно не существенна по отношению к чистой стоимости моего имущества и членов моей семьи, или (ii) если существенна, то вероятность наступления ситуации неплатежеспособности страховщика минимальна," [level=6]
- heading "b." [level=6]
- heading "доходность зависит от одного и более внутренних фондов страховой компании (отличных от основных активов) и (i) суммарно не существенна по отношению к чистой стоимости моего имущества и членов моей семьи, или (ii) если существенна, то вероятность наступления ситуации неплатежеспособности страховщика минимальна," [level=6]
- heading "c." [level=6]
- heading "доходность зависит от одного и более внешних фондов, в которые инвестирует страховая компания, и такая финансовая заинтересованность соответствует требованиям политики по прямой финансовой заинтересованности." [level=6]
- heading "7." [level=6]
- heading "Ни я, ни ближайшие члены моей семьи не имеем договоров накопительного страхования, связанных с инвестированием во внутренние фонды Клиента(ов), в аудите (или обзорной проверке) которых я принимаю участие как участник группы по заданию или как лицо, осуществляющее руководство над руководителем задания." [level=6]
- heading "8." [level=6]
- heading "Ни мне, ни ближайшим членам моей семьи не причитаются компенсационные выплаты в соответствии с пенсионной программой с установленными выплатами, в рамках которой осуществляются инвестиции в Клиента(ов)." [level=6]
- heading "9." [level=6]
- heading "Ни я, ни ближайшие члены моей семьи не имеем финансовой заинтересованности в организации, в которой у Клиента(ов) также есть финансовая заинтересованность, включая совместные предприятия или организации, количество участников (акционеров) которых ограничено в силу требований закона, совместных деловых отношений с Клиентом(ами), его должностным лицом, директором, контролирующим акционером или иным лицом, которое выполняет функции руководителя Клиента(ов), и не имеют обязательств по приобретению такой заинтересованности или установлению таких отношений с Клиентом(ами), кроме тех случаев, когда получено специальное разрешение от партнера, отвечающего за вопросы независимости." [level=6]
- heading "10." [level=6]
- heading [level=6]
- heading "11." [level=6]
- heading "В дополнение к положению выше в случае, если я являюсь участником аудиторской группы / группы по заданию, обеспечивающему уверенность, отличному от аудита и обзорной проверки, я сообщил(а) руководителю задания или партнеру, отвечающему за вопросы независимости, о следующих обстоятельствах:" [level=6]
- heading "a." [level=6]
- heading "Мой родственник является руководителем, должностным лицом, главным бухгалтером или сотрудником, занимающим должность, позволяющую ему (ей) оказывать значительное влияние на ведение бухгалтерского учета или на подготовку бухгалтерской (финансовой) отчетности Клиента(ов) (или информации о предмете задания, в отношении которой выполняется задание, обеспечивающее уверенность, отличное от аудита и обзорной проверки);" [level=6]
- heading "b." [level=6]
- heading "Ближайший член моей семьи является сотрудником Клиента(ов);" [level=6]
- heading "c." [level=6]
- heading "Наличие близких личных отношений с руководителем, должностным лицом, главным бухгалтером, или с сотрудником, занимающим должность, позволяющую ему оказывать значительное влияние на ведение бухгалтерского учета или на подготовку бухгалтерской(финансовой) отчетности Клиента(ов) (или информации о предмете задания, в отношении которой выполняется задание, обеспечивающее уверенность, отличное от аудита и обзорной проверки)." [level=6]
- heading "12." [level=6]
- heading "Я не принимал(а) подарки или иные знаки делового гостеприимства от Клиента(ов), включая оплаченные представительские расходы и т.п., за исключением подарков или знаков делового гостеприимства, которые являются явно незначительными и не имеют последствий." [level=6]
- heading "13." [level=6]
- heading "Я не занимал(а) должность руководителя, главного бухгалтера, иного должностного лица и не был(а) сотрудником Клиента(ов) в должности, позволяющей мне оказывать значительное влияние на ведение бухгалтерского учета или на подготовку бухгалтерской(финансовой) отчетности Клиента(ов) (или информации о предмете задания, в отношении которой выполняется задание, обеспечивающее уверенность, отличное от аудита и обзорной проверки) в течении периода выполнения задания (включая период, охватываемый бухгалтерской (финансовой) отчетностью, в отношении которой ТеДо будет выражать свое мнение)." [level=6]
- heading "14." [level=6]
- heading "Я немедленно уведомлю руководителя задания или партнера, отвечающего за вопросы независимости, если я вступлю в переговоры с Клиентом(ами) о возможности трудоустройства у Клиента(ов), за исключением случаев, когда данное предложение будет отклонено мной сразу же после его получения." [level=6]
- heading "У меня и у ближайших членов моей семьи нет никаких взаимоотношений и обстоятельств, отличных от перечисленных выше, в том числе с другими компонентами или связанными сторонами группового клиента по аудиту, в отношении которых есть причины полагать, что они могут создать угрозу личной независимости в рамках участия в аудите группы." [level=6]
- heading "*Финансовые взаимоотношения в соответствии с правилами Комиссии по ценным бумагам и биржам США (КЦББ)" [level=6]
- text: Правила КЦББ более строгие, чем Положение об аудиторской независимости. В случаях, когда Вы попадаете под ограничения КЦББ, для Вас и ближайших членов Вашей семьи могут быть запрещены перечисленные ниже продукты.
- heading "Банковские счета" [level=6]
- heading "Разрешены при условии, что суммарный баланс на текущем банковском, сберегательном или другом аналогичном счетах не превышает сумму, полностью застрахованную государственной программой. Овердрафт запрещен, даже если он не используется (т. е., снятие суммы денежных средств в большем размере, чем доступно на банковском счете с учетом обеспечения овердрафта по договору или с учетом суммы денежных средств на другом депозитном счете, являющемся обеспечением овердрафта по договору)." [level=6]
- heading "Потребительские займы" [level=6]
- heading "Потребительский займ (такой как, например, кредитная карта, рассрочка платежа при розничных покупках или займ на ремонт жилья, не обеспеченный ипотекой по основному месту жительства) является разрешенным при условии, что совокупный непогашенный остаток, причитающийся кредитной организации, составляет до 10 000 долларов США на текущих условиях, принимая во внимание дату платежа и любой доступный льготный период (обычно ежемесячно). Обратите внимание, что потребительский займ не включает в себя другие финансовые механизмы доступные потребителям, такие как балансы цифровых платежных приложений или овердрафты. Потребительские кредиты от кредитных организаций, на которые распространяются ограничения на займы (Beneficial Owner with Significant Influence (BOSI)), разрешены без каких-либо условий." [level=6]
- heading "Другие займы" [level=6]
- heading [level=6]
- heading "Страхование" [level=6]
- heading "Новые страховые полисы запрещены (например, страхование жизни, здоровья, недвижимости или автомобиля). Уже имеющиеся полисы могут быть сохранены и условно разрешены, если они были приобретены до 7 мая 2001 или позднее, но до того, как на Вас начали распространяться ограничения КЦББ, и при этом вероятность банкротства страховщика близка к нулю. Изменение условий имеющегося полиса страхования может быть классифицировано как приобретение нового полиса. В случае возникновения вопросов, необходимо проконсультироваться с группой, отвечающей за вопросы независимости." [level=6]
- heading "Брокерские счета" [level=6]
- heading "Общая сумма денежных средств и стоимости ценных бумаг не может превышать суммы, полностью застрахованной в рамках локальной страховой программы. В России программа страхования брокерских счетов отсутствует." [level=6]
- heading "В случае, если я участвовал/ла в осуществлении АО \"Технологии Доверия- Аудит\" и/или ООО \"Технологии Доверия- Аудиторские Услуги\" (далее - \"Общества\") аудиторской деятельности, в дополнение к вышеперечисленному, я подтверждаю, что:" [level=6]
- heading "Я полностью понимаю и выполняю требования законодательства об аудиторской деятельности, стандартов аудиторской деятельности, Правил независимости аудиторов и аудиторских организаций, Кодекса этики аудиторов России, Правил внутреннего контроля по противодействию легализации (отмыванию) доходов, полученных преступным путем, финансированию терроризма и финансированию распространения оружия массового уничтожения в ходе оказания аудиторских услуг Обществами, а также Положения по контролю качества Обществ." [level=6]
- heading "Примечания:" [level=6]
- text: "“Ближайшими членами семьи” являются супруги, включая лиц, состоящих в фактически брачных отношениях, дети на иждивении (включая приемных детей, детей под опекой и детей супруги (супруга)) и все прочие родственники, получающие от Вас существенную финансовую поддержку и на которых Вы можете оказывать значительное влияние.: “Родственники” - Ваш(а) супруг(а), Ваши родители, братья, сестры, дети, а также родители и дети Вашего(ей) супруга(и). “Существенный” - финансовая заинтересованность, как правило, является существенной для лица, если она (ее стоимость) составляет не менее 5 % от совокупной чистой стоимости имущества данного лица и членов его семьи. “Прямая финансовая заинтересованность” включает в том числе, финансовую заинтересованность в случае, если Вы или члены Вашей семьи являетесь одновременно управляющими фонда, бенефициарами фонда или арбитражным управляющим должника и кредитором должника. Определение связанных сторон клиента по аудиту представлено в секции “Определения” Положения об аудиторской независимости. Список связанных сторон клиента по аудиту доступен в Реестре компаний с ограничениями независимости (CES), в который вносятся все клиенты по аудиту и их связанные стороны, а также все клиенты по заданиям, обеспечивающим уверенность, отличным от аудита и обзорной проверки. При возникновении вопросов, необходимо обратиться к аудиторской группе и свериться со структурой клиента."
- alert:
  - text: Проект создан
  - button
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { BASE_URL, USERNAME, PASSWORD, CLIENT_CODE } from '../sources/consts/index.js';
   3 | import { SignInPage, EngagementsPage, CreateEngPage, EngagementPage } from '../sources/pages/index.js';
   4 | import { EngagementBuilder } from '../sources/builders/engagement.builder.js';
   5 |
   6 | // добавляем данные юзера для авторизации
   7 | const USER_DATA = {
   8 |   password: PASSWORD,
   9 |   username: USERNAME
  10 | };
  11 |
  12 | // добавляем атрибуты нового Engagement
  13 | const engagementBuilder = new EngagementBuilder()
  14 |       .addCustomName()
  15 |       .addDepartmentName()
  16 |       .addType()
  17 |       .addReportingStandard()
  18 |       .addVerificationPeriods()
  19 |       .addVerificationYear()
  20 |       .createEngagement()
  21 |
  22 | test.describe('Создание Engagement и работа с ним', () => {
  23 |     test.beforeEach('Переход на главную страницу веб-приложения', async ({ page }) => {
  24 |         const signInPage = new SignInPage(page);
  25 |         const engagementsPage = new EngagementsPage(page);
  26 |
  27 |         await signInPage.open(BASE_URL);
  28 |         await signInPage.signInAndEngagementsPage(USER_DATA.username, USER_DATA.password);
  29 |
  30 |         await expect(engagementsPage.createEngLink).toBeVisible();
  31 |     });
  32 |
  33 |     test('Проверка валидации при попытке создать Engagement с незаполненными полями', async ({ page }) => {
  34 |         const engagementsPage = new EngagementsPage(page);
  35 |         const createEngPage = new CreateEngPage(page);
  36 |
  37 |         await engagementsPage.gotoCreateEngPage();
  38 |         await createEngPage.validateEngEntities();
  39 |
  40 |         expect(createEngPage.clientNameFieldError).toContainText('Обязательно для заполнения');
  41 |         expect(createEngPage.departmentFieldError).toContainText('Обязательно для заполнения');
  42 |         expect(createEngPage.customNameFieldError).toContainText('Обязательно для заполнения');
  43 |     });
  44 |
  45 |     test('Создание Engagement', async ({ page }) => {
  46 |         const engagementsPage = new EngagementsPage(page);
  47 |         const createEngPage = new CreateEngPage(page);
  48 |         const engagementPage = new EngagementPage(
  49 |             page, 
  50 |             engagementBuilder.name,
  51 |             CLIENT_CODE,
  52 |             engagementBuilder.departmentName,
  53 |             engagementBuilder.type,
  54 |             engagementBuilder.reportingStandard,
  55 |             engagementBuilder.verificationPeriods,
  56 |             engagementBuilder.verificationYear
  57 |         );
  58 |
  59 |         await engagementsPage.gotoCreateEngPage();
  60 |         await createEngPage.createEngagement(
  61 |             engagementBuilder.name,
  62 |             CLIENT_CODE,
  63 |             engagementBuilder.departmentName,
  64 |             engagementBuilder.type,
  65 |             engagementBuilder.reportingStandard,
  66 |             engagementBuilder.verificationPeriods,
  67 |             engagementBuilder.verificationYear
  68 |         );
  69 |
  70 |         await expect(engagementPage.clientCodeInfo).toContainText(`${CLIENT_CODE}`);
> 71 |         await expect(engagementPage.customNameField).toContainText(engagementBuilder.customEngNameField);
     |                                                      ^ Error: expect(locator('a.MuiTypography-root.MuiTypography-inherit.MuiLink-root.MuiLink-underlineHover.css-9mh5gv')).toContainText(expected)
  72 |     });
  73 |
  74 |     test('Подписание независимости', async ({ page }) => {
  75 |         const createEngPage = new CreateEngPage(page);
  76 |
  77 |         await createEngPage.addPromise();
  78 |         await expect(createEngPage.doneEngMessage).toBeVisible();
  79 |
  80 |         await createEngPage.gotoEngagementPage();
  81 |
  82 |     });
  83 |
  84 |     test('Проверка пагинации на странице Engagements', async ({ page }) => {
  85 |         const engagementsPage = new EngagementsPage(page);
  86 |
  87 |         await engagementsPage.usePagination();
  88 |
  89 |         await expect(engagementsPage.firstPaginationIcon).toContainText('1–50 из 411');
  90 |     });
  91 |
  92 |     test('Переход на страницу списка запросов (логов) Engagement', async ({ page }) => {
  93 |         const engagementsPage = new EngagementsPage(page);
  94 |
  95 |         await engagementsPage.gotoEngagementLogsPage();
  96 |
  97 |         await expect(engagementsPage.dropDownEngLogs).toBeVisible(); 
  98 |     });
  99 | });
```